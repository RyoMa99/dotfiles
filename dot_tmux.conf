# === 基本設定 ===

# True Color サポート（WezTerm + Neovim 連携）
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# カーソル形状のパススルー（Neovim の insert/normal 切替）
set -ga terminal-overrides '*:Ss=\E[%p1%d q:Se=\E[ q'

# クリップボード（WezTerm の OSC 52 経由でシステムクリップボードと連携）
set -g set-clipboard on

# Undercurl サポート（Neovim diagnostics の波線表示）
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'

# マウス操作を有効化
set -g mouse on

# ESC キーの遅延をなくす（Neovim のモード切替を高速に）
set -sg escape-time 0

# スクロールバック行数
set -g history-limit 10000

# コピーモードを vi キーバインドにする
set -g mode-keys vi
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection-and-cancel

# === ペイン操作 ===

# 分割（| で縦、- で横。現在のディレクトリを引き継ぐ）
bind | split-window -h -c '#{pane_current_path}'
bind - split-window -v -c '#{pane_current_path}'

# ペイン移動（hjkl）
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ペインリサイズ（H/J/K/L で5セルずつ）
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ペイン入れ替え（フォーカスは現在位置に留まる）
bind -r '}' swap-pane -D -d
bind -r '{' swap-pane -U -d

# ペインを閉じる（確認なし）
bind x kill-pane

