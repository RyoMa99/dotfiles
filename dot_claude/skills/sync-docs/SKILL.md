---
name: sync-docs
description: 実装コードとドキュメントの差異を調査し、ドキュメントを実装に合わせて更新する。
argument-hint: "[docs-folder-path]"
allowed-tools: ["Bash", "Glob", "Grep", "Read", "Edit", "Write", "Task"]
---

# Sync Docs Skill

実装コードとドキュメントの差異を検出し、ドキュメントを実装に合わせて更新する。

## When to Use This Skill

Trigger when user:
- `/sync-docs` コマンドを実行
- 「ドキュメントを更新して」「実装とドキュメントを同期して」と依頼
- 大きな実装変更の後
- リリース前のドキュメント確認

## 基本原則

**実装が正、ドキュメントを実装に合わせる**

## 実行フロー

### Step 1: ドキュメントの場所を特定

以下の順序で検索：

1. 引数で指定されたパス
2. `docs/` ディレクトリ
3. `documents/` ディレクトリ
4. プロジェクトルートのMarkdownファイル

### Step 2: 差異の調査

Exploreエージェントを使用して、以下の観点で差異を調査：

| チェック項目 | 内容 |
|-------------|------|
| 進捗状況 | 実装フェーズとドキュメントの進捗が一致しているか |
| 機能一覧 | チェックボックスの状態が実装と一致しているか |
| ディレクトリ構造 | ドキュメントに記載された構造が実際に存在するか |
| ライブラリバージョン | package.jsonなどと一致しているか |
| 設定値 | 設定ファイルの値がドキュメントと一致しているか |
| API定義 | エンドポイントやパラメータが実装と一致しているか |
| システムプロンプト | 記載されたプロンプトが実装と一致しているか |

### Step 3: 差異の一覧を作成

発見した差異を優先度別に分類：

```markdown
## 差異一覧

### Critical（重要）
- [ ] README.md:15 - インストールコマンドが古い（npm → pnpm）
- [ ] docs/api.md:42 - 存在しないエンドポイントが記載されている

### Important（要修正）
- [ ] docs/architecture.md:30 - ディレクトリ構造が実際と異なる
- [ ] package.json vs README.md - バージョン不一致

### Minor（軽微）
- [ ] docs/setup.md:10 - 環境変数名のタイポ
```

### Step 4: ドキュメントを修正

Editツールを使用して、差異を修正。

**修正ルール:**
- 実装に合わせて修正
- 未実装の機能は「Phase 2」などに移動
- 削除された機能は記載を削除

### Step 5: 変更サマリーを報告

```markdown
## 変更サマリー

### 修正したファイル
- README.md - インストールコマンドを更新
- docs/api.md - 3つのエンドポイントを追加、2つを削除

### 未実装として移動
- ユーザー認証機能 → Phase 2

### 確認が必要
- docs/deployment.md - AWSリージョンの確認が必要
```

### Step 6: フォローアップ

必要に応じて `/sync-knowledge` でナレッジベースへの同期を提案。

## 使用例

```
# デフォルト（docs/を検索）
/sync-docs

# パス指定
/sync-docs documents/

# 特定ファイル
/sync-docs README.md
```

## 注意事項

- 大きな変更がある場合は、修正前にユーザーに確認
- 機密情報が含まれないか確認
- gitでの差分確認を推奨
